import{R as u,m as S,j as d,r as y,a as L,H as $}from"./index-D9A7aE9K.js";import{g as H,u as V}from"./getToken-iY5kRPZn.js";function w(){return w=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var e in o)({}).hasOwnProperty.call(o,e)&&(t[e]=o[e])}return t},w.apply(null,arguments)}function P(t,r){if(t==null)return{};var o={};for(var e in t)if({}.hasOwnProperty.call(t,e)){if(r.indexOf(e)!==-1)continue;o[e]=t[e]}return o}function D(t,r){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,e){return o.__proto__=e,o},D(t,r)}function j(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,D(t,r)}function X(t,r){return t.classList?!!r&&t.classList.contains(r):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+r+" ")!==-1}function W(t,r){t.classList?t.classList.add(r):X(t,r)||(typeof t.className=="string"?t.className=t.className+" "+r:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+r))}function F(t,r){return t.replace(new RegExp("(^|\\s)"+r+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function z(t,r){t.classList?t.classList.remove(r):typeof t.className=="string"?t.className=F(t.className,r):t.setAttribute("class",F(t.className&&t.className.baseVal||"",r))}const B={disabled:!1},I=u.createContext(null);var M=function(r){return r.scrollTop},b="unmounted",g="exited",h="entering",m="entered",N="exiting",v=function(t){j(r,t);function r(e,s){var n;n=t.call(this,e,s)||this;var i=s,a=i&&!i.isMounting?e.enter:e.appear,c;return n.appearStatus=null,e.in?a?(c=g,n.appearStatus=h):c=m:e.unmountOnExit||e.mountOnEnter?c=b:c=g,n.state={status:c},n.nextCallback=null,n}r.getDerivedStateFromProps=function(s,n){var i=s.in;return i&&n.status===b?{status:g}:null};var o=r.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(s){var n=null;if(s!==this.props){var i=this.state.status;this.props.in?i!==h&&i!==m&&(n=h):(i===h||i===m)&&(n=N)}this.updateStatus(!1,n)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var s=this.props.timeout,n,i,a;return n=i=a=s,s!=null&&typeof s!="number"&&(n=s.exit,i=s.enter,a=s.appear!==void 0?s.appear:i),{exit:n,enter:i,appear:a}},o.updateStatus=function(s,n){if(s===void 0&&(s=!1),n!==null)if(this.cancelNextCallback(),n===h){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:S.findDOMNode(this);i&&M(i)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===g&&this.setState({status:b})},o.performEnter=function(s){var n=this,i=this.props.enter,a=this.context?this.context.isMounting:s,c=this.props.nodeRef?[a]:[S.findDOMNode(this),a],l=c[0],p=c[1],f=this.getTimeouts(),x=a?f.appear:f.enter;if(!s&&!i||B.disabled){this.safeSetState({status:m},function(){n.props.onEntered(l)});return}this.props.onEnter(l,p),this.safeSetState({status:h},function(){n.props.onEntering(l,p),n.onTransitionEnd(x,function(){n.safeSetState({status:m},function(){n.props.onEntered(l,p)})})})},o.performExit=function(){var s=this,n=this.props.exit,i=this.getTimeouts(),a=this.props.nodeRef?void 0:S.findDOMNode(this);if(!n||B.disabled){this.safeSetState({status:g},function(){s.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:N},function(){s.props.onExiting(a),s.onTransitionEnd(i.exit,function(){s.safeSetState({status:g},function(){s.props.onExited(a)})})})},o.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(s,n){n=this.setNextCallback(n),this.setState(s,n)},o.setNextCallback=function(s){var n=this,i=!0;return this.nextCallback=function(a){i&&(i=!1,n.nextCallback=null,s(a))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},o.onTransitionEnd=function(s,n){this.setNextCallback(n);var i=this.props.nodeRef?this.props.nodeRef.current:S.findDOMNode(this),a=s==null&&!this.props.addEndListener;if(!i||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],l=c[0],p=c[1];this.props.addEndListener(l,p)}s!=null&&setTimeout(this.nextCallback,s)},o.render=function(){var s=this.state.status;if(s===b)return null;var n=this.props,i=n.children;n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef;var a=P(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return u.createElement(I.Provider,{value:null},typeof i=="function"?i(s,a):u.cloneElement(u.Children.only(i),a))},r}(u.Component);v.contextType=I;v.propTypes={};function E(){}v.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:E,onEntering:E,onEntered:E,onExit:E,onExiting:E,onExited:E};v.UNMOUNTED=b;v.EXITED=g;v.ENTERING=h;v.ENTERED=m;v.EXITING=N;var q=function(r,o){return r&&o&&o.split(" ").forEach(function(e){return W(r,e)})},O=function(r,o){return r&&o&&o.split(" ").forEach(function(e){return z(r,e)})},R=function(t){j(r,t);function r(){for(var e,s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n))||this,e.appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(a,c){var l=e.resolveArguments(a,c),p=l[0],f=l[1];e.removeClasses(p,"exit"),e.addClass(p,f?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(a,c)},e.onEntering=function(a,c){var l=e.resolveArguments(a,c),p=l[0],f=l[1],x=f?"appear":"enter";e.addClass(p,x,"active"),e.props.onEntering&&e.props.onEntering(a,c)},e.onEntered=function(a,c){var l=e.resolveArguments(a,c),p=l[0],f=l[1],x=f?"appear":"enter";e.removeClasses(p,x),e.addClass(p,x,"done"),e.props.onEntered&&e.props.onEntered(a,c)},e.onExit=function(a){var c=e.resolveArguments(a),l=c[0];e.removeClasses(l,"appear"),e.removeClasses(l,"enter"),e.addClass(l,"exit","base"),e.props.onExit&&e.props.onExit(a)},e.onExiting=function(a){var c=e.resolveArguments(a),l=c[0];e.addClass(l,"exit","active"),e.props.onExiting&&e.props.onExiting(a)},e.onExited=function(a){var c=e.resolveArguments(a),l=c[0];e.removeClasses(l,"exit"),e.addClass(l,"exit","done"),e.props.onExited&&e.props.onExited(a)},e.resolveArguments=function(a,c){return e.props.nodeRef?[e.props.nodeRef.current,a]:[a,c]},e.getClassNames=function(a){var c=e.props.classNames,l=typeof c=="string",p=l&&c?c+"-":"",f=l?""+p+a:c[a],x=l?f+"-active":c[a+"Active"],U=l?f+"-done":c[a+"Done"];return{baseClassName:f,activeClassName:x,doneClassName:U}},e}var o=r.prototype;return o.addClass=function(s,n,i){var a=this.getClassNames(n)[i+"ClassName"],c=this.getClassNames("enter"),l=c.doneClassName;n==="appear"&&i==="done"&&l&&(a+=" "+l),i==="active"&&s&&M(s),a&&(this.appliedClasses[n][i]=a,q(s,a))},o.removeClasses=function(s,n){var i=this.appliedClasses[n],a=i.base,c=i.active,l=i.done;this.appliedClasses[n]={},a&&O(s,a),c&&O(s,c),l&&O(s,l)},o.render=function(){var s=this.props;s.classNames;var n=P(s,["classNames"]);return u.createElement(v,w({},n,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},r}(u.Component);R.defaultProps={classNames:""};R.propTypes={};var _,T;function Q(t,r){return!(t===r||u.isValidElement(t)&&u.isValidElement(r)&&t.key!=null&&t.key===r.key)}var C={out:"out-in",in:"in-out"},k=function(r,o,e){return function(){var s;r.props[o]&&(s=r.props)[o].apply(s,arguments),e()}},Z=(_={},_[C.out]=function(t){var r=t.current,o=t.changeState;return u.cloneElement(r,{in:!1,onExited:k(r,"onExited",function(){o(h,null)})})},_[C.in]=function(t){var r=t.current,o=t.changeState,e=t.children;return[r,u.cloneElement(e,{in:!0,onEntered:k(e,"onEntered",function(){o(h)})})]},_),J=(T={},T[C.out]=function(t){var r=t.children,o=t.changeState;return u.cloneElement(r,{in:!0,onEntered:k(r,"onEntered",function(){o(m,u.cloneElement(r,{in:!0}))})})},T[C.in]=function(t){var r=t.current,o=t.children,e=t.changeState;return[u.cloneElement(r,{in:!1,onExited:k(r,"onExited",function(){e(m,u.cloneElement(o,{in:!0}))})}),u.cloneElement(o,{in:!0})]},T),A=function(t){j(r,t);function r(){for(var e,s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n))||this,e.state={status:m,current:null},e.appeared=!1,e.changeState=function(a,c){c===void 0&&(c=e.state.current),e.setState({status:a,current:c})},e}var o=r.prototype;return o.componentDidMount=function(){this.appeared=!0},r.getDerivedStateFromProps=function(s,n){return s.children==null?{current:null}:n.status===h&&s.mode===C.in?{status:h}:n.current&&Q(n.current,s.children)?{status:N}:{current:u.cloneElement(s.children,{in:!0})}},o.render=function(){var s=this.props,n=s.children,i=s.mode,a=this.state,c=a.status,l=a.current,p={children:n,current:l,changeState:this.changeState,status:c},f;switch(c){case h:f=J[i](p);break;case N:f=Z[i](p);break;case m:f=l}return u.createElement(I.Provider,{value:{isMounting:!this.appeared}},f)},r}(u.Component);A.propTypes={};A.defaultProps={mode:C.out};const K="/assets/connected-eyewear-5T9OquAD.png",Y="/assets/disconnected-eyewear-BQFmIMk6.png",ee="data:image/svg+xml,%3csvg%20width='321'%20height='141'%20viewBox='0%200%20321%20141'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.8'%3e%3cg%20filter='url(%23filter0_f_1068_825)'%3e%3cellipse%20cx='160.5'%20cy='70.5'%20rx='120.5'%20ry='30.5'%20stroke='url(%23paint0_radial_1068_825)'%20stroke-opacity='0.5'%20stroke-width='20'/%3e%3c/g%3e%3cg%20filter='url(%23filter1_f_1068_825)'%3e%3cpath%20d='M160.5%2050C193.196%2050%20222.459%2053.3646%20243.253%2058.6279C253.726%2061.2789%20261.49%2064.2735%20266.396%2067.209C268.959%2068.7428%20270.133%2069.8732%20270.658%2070.5C270.133%2071.1268%20268.959%2072.2572%20266.396%2073.791C261.49%2076.7265%20253.726%2079.7211%20243.253%2082.3721C222.459%2087.6354%20193.196%2091%20160.5%2091C127.804%2091%2098.5415%2087.6354%2077.7471%2082.3721C67.2738%2079.7211%2059.5098%2076.7265%2054.6045%2073.791C52.0408%2072.2569%2050.8655%2071.1267%2050.3408%2070.5C50.8655%2069.8733%2052.0408%2068.7431%2054.6045%2067.209C59.5098%2064.2735%2067.2738%2061.2789%2077.7471%2058.6279C98.5415%2053.3646%20127.804%2050%20160.5%2050Z'%20stroke='url(%23paint1_radial_1068_825)'%20stroke-width='20'/%3e%3c/g%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_f_1068_825'%20x='0'%20y='0'%20width='321'%20height='141'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='BackgroundImageFix'%20result='shape'/%3e%3cfeGaussianBlur%20stdDeviation='8'%20result='effect1_foregroundBlur_1068_825'/%3e%3c/filter%3e%3cfilter%20id='filter1_f_1068_825'%20x='28'%20y='28'%20width='265'%20height='85'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='BackgroundImageFix'%20result='shape'/%3e%3cfeGaussianBlur%20stdDeviation='6'%20result='effect1_foregroundBlur_1068_825'/%3e%3c/filter%3e%3cradialGradient%20id='paint0_radial_1068_825'%20cx='0'%20cy='0'%20r='1'%20gradientUnits='userSpaceOnUse'%20gradientTransform='translate(125.748%20101)%20rotate(-29.2202)%20scale(115.37%20149.006)'%3e%3cstop%20offset='0.0526267'%20stop-color='%2382A8F3'/%3e%3cstop%20offset='0.354808'%20stop-color='%2300FD98'%20stop-opacity='0.47'/%3e%3cstop%20offset='0.651195'%20stop-color='%2300B7FF'/%3e%3cstop%20offset='1'%20stop-color='%2367D7FF'/%3e%3c/radialGradient%3e%3cradialGradient%20id='paint1_radial_1068_825'%20cx='0'%20cy='0'%20r='1'%20gradientUnits='userSpaceOnUse'%20gradientTransform='translate(37.4015%20102.13)%20rotate(-17.0037)%20scale(241.153%20154.96)'%3e%3cstop%20offset='0.0444872'%20stop-color='%2341D0F3'/%3e%3cstop%20offset='0.361802'%20stop-color='%237DE1FF'%20stop-opacity='0'/%3e%3cstop%20offset='0.696713'%20stop-color='%230A9EFF'%20stop-opacity='0.33'/%3e%3cstop%20offset='1'%20stop-color='%231E43EA'/%3e%3c/radialGradient%3e%3c/defs%3e%3c/svg%3e";function te({text:t,onClick:r}){return d.jsx("button",{type:"button",className:"absolute bottom-[15vh] z-10 cursor-pointer border-none bg-transparent text-center text-gray-70 underline bt3",onClick:r,children:t})}function ne({src:t,alt:r}){return d.jsx("div",{className:"flex h-44 items-center justify-center",children:d.jsx("img",{src:t,alt:r,className:"h-auto w-[220px]"})})}function re({text:t}){return d.jsx("p",{className:"mb-6 px-6 text-center text-[1.6rem] font-medium text-black",children:t})}const G=200001;function ie(){const[t,r]=y.useState(!1),o=L(),e=H(),{connected:s,send:n}=V({paintingId:G,token:e});return y.useEffect(()=>{s&&r(!0)},[s]),y.useEffect(()=>{const i=t?window.setTimeout(()=>o("/chat-gaze",{state:{paintingId:G}}),3e3):null;return()=>{i!==null&&window.clearTimeout(i)}},[t,o]),d.jsxs("div",{className:"relative flex h-dvh flex-col items-center overflow-hidden bg-gradient-to-br from-blue-50 to-slate-300",children:[d.jsx($,{showBackButton:!0,backgroundColorClass:"bg-transperate"}),d.jsxs("div",{className:"w-full px-4 pt-[10rem]",children:[d.jsx(re,{text:t?"아이웨어 연결에 성공하였습니다.":"전용 아이웨어를 착용하고 연결해주세요."}),d.jsxs("div",{className:"relative mx-auto flex h-[24rem] w-[30rem] items-center justify-center",children:[d.jsx("img",{src:ee,alt:"background ring",className:"pointer-events-none absolute -bottom-[5rem] h-[23rem] w-[30rem] opacity-70"}),d.jsx(A,{mode:"out-in",children:d.jsx(R,{timeout:300,classNames:"fade",children:d.jsx(ne,{src:t?K:Y,alt:t?"연결된 아이웨어":"아이웨어 연결 전"})},t?"connected":"disconnected")})]})]}),!t&&d.jsxs("div",{className:"flex w-full flex-col items-center gap-[1rem] pb-[2rem]",children:[d.jsx(te,{text:"연결에 문제가 있나요?",onClick:()=>o("/help")}),d.jsx("button",{type:"button",className:"rounded-[24px] bg-gray-10 px-[1.6rem] py-[0.8rem] text-gray-100 bd2",onClick:()=>{n("onboarding: 연결 테스트")},children:"임시 연결 시작"})]})]})}export{ie as default};
