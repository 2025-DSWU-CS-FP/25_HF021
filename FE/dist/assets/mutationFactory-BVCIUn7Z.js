var E=s=>{throw TypeError(s)};var O=(s,t,e)=>t.has(s)||E("Cannot "+e);var r=(s,t,e)=>(O(s,t,"read from private field"),e?e.call(s):t.get(s)),m=(s,t,e)=>t.has(s)?E("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),b=(s,t,e,i)=>(O(s,t,"write to private field"),i?i.call(s,e):t.set(s,e),e),v=(s,t,e)=>(O(s,t,"access private method"),e);import{A as B,B as I,C as M,D as P,F as R,l as U,r as y,J as $,K as q,k as h}from"./index-D9A7aE9K.js";var c,p,a,n,o,k,C,K,A=(K=class extends B{constructor(t,e){super();m(this,o);m(this,c);m(this,p);m(this,a);m(this,n);b(this,c,t),this.setOptions(e),this.bindMethods(),v(this,o,k).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var i;const e=this.options;this.options=r(this,c).defaultMutationOptions(t),I(this.options,e)||r(this,c).getMutationCache().notify({type:"observerOptionsUpdated",mutation:r(this,a),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&M(e.mutationKey)!==M(this.options.mutationKey)?this.reset():((i=r(this,a))==null?void 0:i.state.status)==="pending"&&r(this,a).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=r(this,a))==null||t.removeObserver(this)}onMutationUpdate(t){v(this,o,k).call(this),v(this,o,C).call(this,t)}getCurrentResult(){return r(this,p)}reset(){var t;(t=r(this,a))==null||t.removeObserver(this),b(this,a,void 0),v(this,o,k).call(this),v(this,o,C).call(this)}mutate(t,e){var i;return b(this,n,e),(i=r(this,a))==null||i.removeObserver(this),b(this,a,r(this,c).getMutationCache().build(r(this,c),this.options)),r(this,a).addObserver(this),r(this,a).execute(t)}},c=new WeakMap,p=new WeakMap,a=new WeakMap,n=new WeakMap,o=new WeakSet,k=function(){var e;const t=((e=r(this,a))==null?void 0:e.state)??P();b(this,p,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},C=function(t){R.batch(()=>{var e,i,u,f,d,g,S,x;if(r(this,n)&&this.hasListeners()){const l=r(this,p).variables,w=r(this,p).context;(t==null?void 0:t.type)==="success"?((i=(e=r(this,n)).onSuccess)==null||i.call(e,t.data,l,w),(f=(u=r(this,n)).onSettled)==null||f.call(u,t.data,null,l,w)):(t==null?void 0:t.type)==="error"&&((g=(d=r(this,n)).onError)==null||g.call(d,t.error,l,w),(x=(S=r(this,n)).onSettled)==null||x.call(S,void 0,t.error,l,w))}this.listeners.forEach(l=>{l(r(this,p))})})},K);function L(s,t){const e=U(),[i]=y.useState(()=>new A(e,s));y.useEffect(()=>{i.setOptions(s)},[i,s]);const u=y.useSyncExternalStore(y.useCallback(d=>i.subscribe(R.batchCalls(d)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),f=y.useCallback((d,g)=>{i.mutate(d,g).catch($)},[i]);if(u.error&&q(i.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:f,mutateAsync:u.mutate}}const T={signup:async s=>(await h.post("/api/v1/auth/signup",s)).data,login:async s=>{const t=await h.post("/api/v1/auth/login",s),{token:e}=t.data;return localStorage.setItem("accessToken",e),t.data},confirmPainting:async s=>(await h.post(`/api/v1/paintings/${s}/confirm`)).data,verifyPassword:async s=>(await h.post("/api/v1/users/verify-password",{password:s})).data.result,addBookmark:s=>async()=>(await h.post(`/api/v1/exhibitions/${s}/bookmark`)).data,removeBookmark:s=>async()=>(await h.delete(`/api/v1/exhibitions/${s}/bookmark`)).data,createBadgeEvent:async s=>(await h.post("/api/v1/badges/events",s)).data,saveScrap:async s=>{const e=(await h.post("/api/v1/scraps/save",s)).data;return typeof e=="string"?{message:e}:e&&typeof e.message=="string"?{message:e.message}:{message:"저장되었습니다."}}};export{T as m,L as u};
