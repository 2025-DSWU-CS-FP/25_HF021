import{c as h,q as p,r as g,a as m,s as f,j as a,H as E}from"./index-D9A7aE9K.js";import{S,E as q}from"./ExhibitionGrid-CN8zCLR1.js";function F(i,o=!0){const{keyword:t,page:e=0,limit:r=12,sort:n="popular"}=i??{};return h({queryKey:["popularExhibitions",{keyword:t,page:e,limit:r,sort:n}],queryFn:p.popularExhibitions({keyword:t,page:e,limit:r,sort:n}),enabled:o,staleTime:6e4,retry:!1})}function j(i,o=24,t=!0){const e=(i??"").trim();return h({queryKey:["popularExhibitionsSuggest",{q:e,limit:o}],queryFn:p.popularExhibitionsSuggest(e,o),enabled:t&&e.length>0,staleTime:6e4,retry:!1})}function v(){const[i,o]=g.useState(""),t=i.trim()||void 0,e=!!t,r=m(),n=s=>r(`/popular/${s}`),{data:u,isFetching:x}=F({keyword:void 0,page:0,limit:24,sort:"popular"},!e),{data:d,isFetching:b}=j(t,24,e),l=e?d:u==null?void 0:u.items,y=g.useMemo(()=>(l??[]).map(s=>({id:String(s.exhibitionId),title:s.exhibitionTitle,location:s.gallery??"",imageUrl:f(s.exhibitionImage??""),artworkCount:s.artCount??0,date:"1970-01-01"})),[l]),c=e?b:x;return a.jsxs("main",{className:"flex min-h-screen w-full flex-col pb-8","aria-busy":c,children:[a.jsx(E,{title:"인기 전시",backgroundColorClass:"bg-gray-5",showBackButton:!0}),a.jsx("section",{className:"px-[2.4rem]",children:a.jsx(S,{value:i,onChange:o})}),a.jsx(q,{exhibitions:y,isLoading:c,onSelect:n})]})}export{v as default};
