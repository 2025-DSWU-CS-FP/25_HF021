import{j as e,c as h,q as p,z as b,r as o,s as f,H as j,M as N}from"./index-D9A7aE9K.js";import{g}from"./gallery-info-C-JrU39F.js";function y({thumbnail:a,title:l,location:s,icon:t=g}){return e.jsxs("section",{className:"flex flex-col gap-[1.6rem]",children:[e.jsx("header",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-[1.6rem]",children:[e.jsx("img",{src:a,alt:"전시 썸네일",className:"h-[7.2rem] w-[7.2rem] rounded-[8px] object-cover"}),e.jsxs("div",{className:"flex flex-col gap-[0.4rem]",children:[e.jsx("h2",{className:"font-semibold text-gray-90 t3",children:l}),e.jsx("p",{className:"text-gray-50 ct3",children:s})]})]})}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute -top-[0.6rem] left-[2rem] z-[1] h-0 w-0 border-x-[0.6rem] border-b-[0.6rem] border-x-transparent border-b-white"}),e.jsxs("div",{className:"relative z-[0] w-full rounded-[8px] bg-white px-[2rem] py-[1.6rem] shadow-sm",children:[e.jsxs("p",{className:"text-gray-80 ct2",children:[e.jsx("span",{className:"text-brand-mint",children:"인기 전시"}),"에 방문하여",e.jsx("br",{}),e.jsx("span",{className:"text-brand-blue",children:"나만의 갤러리"}),"를 만들어 보세요."]}),e.jsx("div",{className:"absolute right-[1.2rem] top-1/2 h-[3.6rem] w-[3.6rem] -translate-y-1/2 overflow-hidden rounded-[6px]",children:e.jsx("img",{src:t,alt:"아이콘",className:"h-full w-full object-cover"})})]})]})]})}function w(a,l=!0){const s=typeof a=="number"&&Number.isFinite(a),t=s?p.popularExhibitionDetail(a):async()=>{throw new Error("Exhibition ID is not set")};return h({queryKey:["popularExhibitionDetail",a],queryFn:t,enabled:l&&s,staleTime:6e4})}function D(){const{id:a}=b(),l=o.useMemo(()=>{const u=Number(a);return Number.isNaN(u)?void 0:u},[a]),{data:s,isFetching:t,isError:c}=w(l,!!l),r=o.useMemo(()=>s?{title:s.exhibitionTitle,location:s.gallery??"",thumbnail:f(s.exhibitionImage??"")}:null,[s]),i=t,m=!t&&(c||!r),n=!t&&!c&&!!r,d=o.useMemo(()=>i?e.jsx("div",{className:"animate-pulse h-[9.6rem] w-full rounded-[12px] bg-gray-10"}):m?e.jsx("p",{className:"text-red-500 ct4",role:"alert",children:"전시 정보를 불러오지 못했어요."}):n&&r?e.jsx(y,{thumbnail:r.thumbnail,title:r.title,location:r.location}):null,[i,m,n,r]),x=o.useMemo(()=>i?e.jsx("div",{className:"px-[2.4rem]",children:e.jsx("div",{className:"animate-pulse h-[20rem] w-full rounded-[12px] bg-gray-10"})}):n&&r?e.jsx("img",{alt:"인기 전시 상세 이미지",src:r.thumbnail,className:"px-[2.4rem]",loading:"lazy"}):null,[i,n,r]);return e.jsxs("div",{className:"pb-[4rem]",children:[e.jsx(j,{title:"인기 전시",showBackButton:!0,backgroundColorClass:"bg-gray-5"}),e.jsxs("main",{className:"flex flex-col gap-[4rem]",children:[e.jsx("section",{className:"px-[2.4rem]",children:d}),e.jsx("section",{"aria-live":"polite",children:x}),e.jsx("section",{className:"px-[2rem]",children:e.jsx(N,{to:"/card",title:"친구와 함께 전시를 관람하고 싶다면?",cta:"Eyedia 공유하기 →"})})]})]})}export{D as default};
